/* Animations */
@keyframes popIn {
  0% { transform: scale(.95); opacity:0; }
  50% { transform: scale(1.02); opacity:1; }
  100% { transform: scale(1); }
}
@keyframes glowFade {
  0% { box-shadow:0 0 0 0 rgba(255,105,180,.8); }
  40% { box-shadow:0 0 0 6px rgba(255,105,180,.3); }
  100% { box-shadow:0 0 0 0 rgba(255,105,180,0); }
}
@keyframes slideHighlight {
  0% { background:#ffe0f7; }
  100% { background:inherit; }
}
.added-row { animation: popIn .5s ease, glowFade 1.2s ease; }
.added-todo { animation: popIn .5s ease, slideHighlight 1.4s ease; }
.status-Pending, .todo-status-Pending { background:#fff59d !important; }
.status-Done, .todo-status-Done { background:#c8e6c9 !important; }
.status-Cancelled, .todo-status-Cancelled { background:#ffcdd2 !important; }
.venue-select { width:100%; font-size:.7rem; padding:.3rem .4rem; border:1px solid #ff8ad6; border-radius:6px; background:#fff; }
* { box-sizing: border-box; }
body {
  font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin: 0;
  background: radial-gradient(circle at top left, #ffe4f4, #ffd0ec 35%, #ffb3e6 70%, #ffa6e1);
  color: #4a154b;
  min-height:100vh;
}
/* Nezuko-inspired bamboo grid overlay */
body::before {
  content:'';
  position:fixed; inset:0; pointer-events:none; z-index:-2;
  background:
    repeating-linear-gradient(90deg, rgba(255,255,255,0.15) 0 8px, transparent 8px 64px),
    repeating-linear-gradient(180deg, rgba(255,255,255,0.12) 0 8px, transparent 8px 64px);
  mix-blend-mode:overlay;
}
/* Soft vignette */
body::after {
  content:''; position:fixed; inset:0; pointer-events:none; z-index:-1;
  background:radial-gradient(circle at center, rgba(255,255,255,0.25) 0%, rgba(255,200,230,0.15) 40%, rgba(255,110,180,0.25) 75%, rgba(120,30,70,0.4) 100%);
  opacity:.55; mix-blend-mode:soft-light;
}

/* Floating petal animation */
@keyframes petalFloat {
  0% { transform:translateY(0) rotate(0deg); opacity:0; }
  10% { opacity:1; }
  50% { transform:translateY(-50vh) rotate(180deg); }
  90% { opacity:1; }
  100% { transform:translateY(-100vh) rotate(360deg); opacity:0; }
}
.petal {
  position:fixed; bottom:-40px; width:18px; height:14px; border-radius:60% 40% 60% 40%;
  background:radial-gradient(circle at 30% 30%, #ffeaf5 0%, #ff9ccf 55%, #ff6fbf 100%);
  box-shadow:0 2px 4px rgba(255,105,180,.4);
  filter:blur(.3px);
  animation:petalFloat var(--dur) linear var(--delay) infinite;
  z-index:-3; opacity:0;
}
.petal.p2 { width:14px; height:11px; background:radial-gradient(circle at 30% 30%, #fff5fa 0%, #ffc0e5 60%, #ff8ad6 100%); }
.petal.p3 { width:22px; height:16px; background:radial-gradient(circle at 30% 30%, #ffeef7 0%, #ffaad7 50%, #ff5fbf 100%); }
header { background: linear-gradient(90deg,#ff5fbf,#ff4fb3,#ff67c7); color:#fff; padding:1.1rem 1.5rem; box-shadow:0 4px 10px rgba(255,105,180,.35); position:sticky; top:0; z-index:50; }
header h1 { margin:0 0 .5rem; font-size:1.7rem; text-align:center; font-weight:700; letter-spacing:.5px; text-shadow:0 2px 4px rgba(0,0,0,.15); }
.date-controls { display:flex; justify-content:center; align-items:center; gap:.6rem; flex-wrap:wrap; }
.date-controls input { padding:.4rem .6rem; border:2px solid #ff8ad6; border-radius:30px; background:#fff; font-weight:500; }
.date-controls button { padding:.45rem .8rem; cursor:pointer; border:none; border-radius:30px; background:#ff6fc8; color:#fff; font-weight:600; box-shadow:0 2px 4px rgba(0,0,0,.15); transition:.2s; }
.date-controls button:hover { background:#ff3fb5; transform:translateY(-2px); }
#weekdayLabel { font-weight:600; min-width:6ch; text-align:center; font-size:.9rem; background:#923e7000; padding:.35rem .8rem; border-radius:20px; box-shadow:0 2px 4px rgba(0,0,0,.1); }

main { display:flex; gap:1.5rem; padding:1.25rem 1.7rem 2rem; flex-wrap:wrap; }
.schedule-section { flex:1 1 650px; backdrop-filter:blur(4px); }
.todo-section { flex:0 0 340px; background:rgba(255,255,255,.85); border:2px solid #ff9bdc; padding:1.1rem 1rem 1.3rem; border-radius:18px; max-height:820px; display:flex; flex-direction:column; box-shadow:0 6px 16px rgba(255,105,180,.25); }
.todo-section h2 { margin:0 0 .8rem; font-weight:700; font-size:1.2rem; color:#ff2fae; letter-spacing:.5px; }

#scheduleTable { width:100%; border-collapse:separate; border-spacing:0; background:rgba(255,255,255,.9); box-shadow:0 6px 14px rgba(255,105,180,.25); border:2px solid #ff9fdf; border-radius:18px; overflow:hidden; }
#scheduleTable th, #scheduleTable td { border:1px solid #ffc1eb; padding:.55rem .6rem; vertical-align:top; font-size:.8rem; }
#scheduleTable thead th { background:linear-gradient(90deg,#ffb4e9,#ffa6e3,#ff9cdd); position:sticky; top:0; z-index:2; font-weight:600; color:#752165; }
.time-col { width:76px; background:#ffe3f5; font-weight:600; color:#aa2e88; }
#scheduleBody tr:nth-child(odd) { background:#fff6fb; }
#scheduleBody tr:nth-child(even) { background:#fff; }
#scheduleBody tr:hover { background:#ffeef9; }

.row-delete-btn { background:#ff3fb5; border:none; color:#fff; font-weight:600; cursor:pointer; padding:.35rem .55rem; border-radius:8px; box-shadow:0 2px 5px rgba(255,105,180,.35); font-size:.7rem; }
.row-delete-btn:hover { background:#ff1499; }

.editable { min-height:38px; cursor:text; }
.status-select { width:100%; font-size:.7rem; border:1px solid #ff8ad6; border-radius:6px; background:#fff5fb; }
.status-Pending { background:linear-gradient(90deg,#ffe7fb,#ffd6f5); }
.status-Done { background:linear-gradient(90deg,#e3ffe9,#c9ffd6); }
.status-Cancelled { background:linear-gradient(90deg,#ffe5ec,#ffd0da); }

#saveIndicator { margin-top:.6rem; font-size:.7rem; color:#8a2c74; font-weight:500; }
#saveIndicator.saving { color:#d640a1; }
#saveIndicator.saved { color:#2e7d32; }

/* To-Do List */
#todoForm { display:flex; flex-wrap:wrap; gap:.55rem; margin-bottom:.9rem; }
#todoForm input[type=text] { flex:1 1 150px; padding:.5rem .75rem; border:2px solid #ff8ad6; border-radius:30px; background:#fff; }
#todoForm select, #todoForm button { padding:.5rem .75rem; border-radius:30px; border:2px solid #ff8ad6; background:#fff5fb; font-weight:600; color:#b32087; }
#todoForm button { background:linear-gradient(90deg,#ff69c6,#ff4fb3,#ff6fc9); color:#fff; border:none; box-shadow:0 3px 8px rgba(255,105,180,.35); cursor:pointer; transition:.2s; }
#todoForm button:hover { transform:translateY(-2px); background:linear-gradient(90deg,#ff4fb3,#ff2aa3,#ff4fb3); }
#todoList { list-style:none; margin:0; padding:0; flex:1 1 auto; overflow-y:auto; }
.todo-item { display:flex; align-items:flex-start; gap:.55rem; padding:.55rem .6rem; border:2px solid #ffc2ec; border-radius:14px; margin-bottom:.55rem; background:rgba(255,255,255,.9); box-shadow:0 3px 8px rgba(255,105,180,.22); }
.todo-item textarea { flex:1 1 auto; resize:vertical; min-height:40px; font-family:inherit; font-size:.78rem; border:1px solid #ff9fdf; border-radius:10px; padding:.4rem .5rem; background:#fff5fb; }
.todo-item select { font-size:.65rem; border:1px solid #ff9fdf; border-radius:8px; background:#fff; }
.todo-item button { background:#ff3fb5; border:none; color:#fff; cursor:pointer; font-size:.75rem; padding:.35rem .55rem; border-radius:8px; box-shadow:0 2px 4px rgba(0,0,0,.15); }
.todo-item button:hover { background:#ff1499; }
.todo-status-Pending { background:linear-gradient(90deg,#ffe7fb,#ffd6f5); }
.todo-status-Done { background:linear-gradient(90deg,#e3ffe9,#c9ffd6); }
.todo-status-Cancelled { background:linear-gradient(90deg,#ffe5ec,#ffd0da); }
.todo-actions { display:flex; gap:.6rem; flex-wrap:wrap; margin-top:.6rem; }

.export-import { margin-top:.6rem; display:flex; gap:.7rem; align-items:center; font-size:.7rem; flex-wrap:wrap; }
.export-import button { padding:.55rem .9rem; border-radius:30px; border:none; font-weight:600; background:linear-gradient(90deg,#ff68c4,#ff47b2,#ff6cca); color:#fff; cursor:pointer; box-shadow:0 3px 8px rgba(255,105,180,.35); }
.export-import button:hover { background:linear-gradient(90deg,#ff47b2,#ff1fa4,#ff47b2); }
footer { text-align:center; font-size:.65rem; padding:1.2rem 1rem 1.6rem; color:#6b245d; }

@media (max-width: 900px) {
  .todo-section { flex:1 1 100%; order:2; }
  .schedule-section { order:1; }
}

/* Print Styles */
@media print {
  body { background:#fff; }
  body::before, body::after, .petal { display:none !important; }
  header, .export-import, .todo-actions, #saveIndicator, .date-controls button, #todoForm button, #todoForm select, #todoForm input[type=date], input[type=file], .row-delete-btn { display:none !important; }
  main { display:block; }
  .todo-section { page-break-before:always; border:none; }
  #scheduleTable th, #scheduleTable td { font-size:10pt; }
  .todo-item { border:1px solid #ccc; }
}
